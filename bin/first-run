#!/usr/bin/env bash

START_TIME=$SECONDS

printf "\e[1;35m==>\e[1;37m FirstRun \e[0m \n"

########################################################################################################################
# set user id for ***
#-----------------------------------------------------------------------------------------------------------------------
if [ -z ${LOCAL_USER_ID+x} ]; then
    printf "\e[1;41m please run bin/set-user-id first \e[0m \n"
    exit 1;
fi

########################################################################################################################
# docker images
#-----------------------------------------------------------------------------------------------------------------------
bin/build-docker

########################################################################################################################
# get and extract fileadmin and uploads - get and import DB structure and structure
#-----------------------------------------------------------------------------------------------------------------------
#bin/import-content

########################################################################################################################
# TYPO3 installation
#-----------------------------------------------------------------------------------------------------------------------
bin/install-typo3

ELAPSED_TIME=$(($SECONDS - $START_TIME))
printf "\e[1;35m==>\e[1;37m FirstRun \e[1;32m DONE \e[1;37m $(($ELAPSED_TIME/60)) min $(($ELAPSED_TIME%60)) sec \n"

printf "$(cat bin/welcome.txt)"
#=======================================================================================================================
